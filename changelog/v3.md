# v3 — Unified rot.js Engine

## Changes

- Replaced hand-rolled dungeon generation with `ROT.Map.Digger` (procedural rooms + corridors)
- Replaced 720-ray raycaster with `ROT.FOV.PreciseShadowcasting` (computed per turn, not per frame)
- Replaced axis-priority enemy pathfinding with `ROT.Path.AStar` (smart corridor navigation)
- Replaced NPC overworld pathfinding with `ROT.Path.AStar` (NPCs no longer get stuck)
- Unified `isWalkable()` — single function for both overworld and dungeon maps
- Removed `isOverworldWalkable()` (redundant)
- FOV moved from render loop (60fps) to turn handler (once per action) — performance improvement
- Lighting layer reads pre-computed `state.visible` instead of inline raycaster

## Reasoning

The game had two completely separate movement/pathfinding systems for overworld and dungeon. Both used naive axis-priority heuristics that could get stuck in corridors. rot.js provides battle-tested algorithms (A* pathfinding, precise shadowcasting, procedural map generation) that work identically across both maps.

## Files Modified

- `rot.min.js` — NEW (rot.js v2.2.1 UMD bundle)
- `.forkarcade.json` — added `engineFiles` with `rot.min.js`
- `index.html` — added rot.min.js script tag
- `game.js` — ROT.Map.Digger, ROT.Path.AStar, ROT.FOV.PreciseShadowcasting, unified isWalkable
- `render.js` — lighting reads state.visible instead of inline raycaster
